!function(t){t.fn.toc=function(e){var o=t.extend({noBackToTopLinks:!1,minimumHeaders:2,title:"TOC:",headers:"h1, h2, h3, h4, h5, h6",listType:"ul",showEffect:"show",showSpeed:0},e);function s(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16)})}var n=t(o.headers).filter(function(){if(t(this).parent("blockquote").length>0)return!1;var e=t(this).prev().attr("name");return!this.id&&e&&(this.id=t(this).attr("id",e.replace(/\./g,"-"))),this.id}),c=t(this);if(!n.length||n.length<o.minimumHeaders||!c.length){t(this).hide(),t(".post-directory-title").css("display","none");return}0===o.showSpeed&&(o.showEffect="none");var r,l={show:function(){c.hide().html(p).show(o.showSpeed)},slideDown:function(){c.hide().html(p).slideDown(o.showSpeed)},fadeIn:function(){c.hide().html(p).fadeIn(o.showSpeed)},none:function(){c.html(p)}},a=function(t){return parseInt(t.nodeName.replace("H",""),10)},h=n.map(function(t,e){return a(e)}).get().sort()[0],d=a(n[0]),p='<p><strong class="toc-title">'+o.title+"</strong></p>\n";p+=" <"+o.listType+' class="toc">',n.on("click",function(){o.noBackToTopLinks||(window.location.hash=this.id)}).addClass("clickable-header").each(function(e,n){if(r=a(n),o.noBackToTopLinks||r!==h||t(n).addClass("top-level-header").after('<i class="icon-arrow-up back-to-top"> </i>'),r===d)p+='<li class="toc-item toc-level-'+r+'">',p+='<a class="jumper" href=\'#'+s(n.id)+"'>",p+="<span class='toc-text'>"+n.innerHTML+"</span>",p+="</a>";else if(r<=d){for(i=r;i<d;i++)p+="</li></"+o.listType+">";p+="<li class='toc-item toc-level-"+r+"'><a class=\"jumper\" href='#"+s(n.id)+"'>",p+="<span class='toc-text'>"+n.innerHTML+"</span>",p+="</a>"}else if(r>d){for(i=r;i>d;i--)p+="<"+o.listType+" class='toc-child'><li class='toc-item toc-level-"+i+"'>";p+='<a class="jumper" href=\'#'+s(n.id)+"'>",p+="<span class='toc-text'>"+n.innerHTML+"</span>",p+="</a>"}d=r}),p+="</"+o.listType+">",o.noBackToTopLinks||t(document).on("click",".back-to-top",function(){t(window).scrollTop(0),window.location.hash=""}),l[o.showEffect]()}}(jQuery),$(document).ready(function(){$(".post-directory").toc();var t=$("#post-directory-module").offset().top,e=$(".clickable-header"),o=[],s=function(){o=[],e.each(function(t,e){o.push(e.offsetTop)})};s(),$(window).bind("load",s);var n=function(){var t=0,e=o.length,s=$(window).scrollTop();if(s+60>o[e-1])t=e;else for(var n=0;n<e;n++)if(s+60<=o[n]){t=n;break}0==t&&(t+=1),$(".toc-item .jumper").removeClass("on"),$(".toc-item .jumper").eq(t-1).addClass("on")};n();var c=function(){var t=document.documentElement.clientHeight;t=t||"auto",$(".post-directory").css("max-height",t)};$(window).scroll(function(){$(window).scrollTop()>=t?($("#post-directory-module").css({top:"0",position:"fixed",width:"inherit"}),$(".post-directory").css("overflow","auto")):($("#post-directory-module").css({position:"inherit",width:"inherit"}),$(".post-directory").css("overflow","hidden"),$(".post-directory").scrollTop(0)),n()}),c(),$(window).on("resize",function(){c()})}),$(".jumper").on("click",function(t){t.preventDefault(),$("body, html").animate({scrollTop:$($(this).attr("href")).offset().top},600)});